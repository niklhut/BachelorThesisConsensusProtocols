python test_runner.py \
    --images "registry.niklabs.de/niklhut/raftswift:latest" \
    --client-image "registry.niklabs.de/niklhut/raftswift:latest" \
    --compaction-thresholds 1000 \
    --peer-counts 3 5 7 \
    --operation-counts 10000 20000 50000 \
    --concurrency-levels 5 10 20 \
    --test-suite "Swift Check" \
    --report "test-output/performance_comparison.txt"


python test_distributed.py \
  --images "registry.niklabs.de/niklhut/raftswift:latest" \
    "registry.niklabs.de/niklhut/raftkotlin:latest" \
    "registry.niklabs.de/niklhut/raftgo:latest" \
  --client-image "registry.niklabs.de/niklhut/raftswift:latest" \
  --peer-counts 3 5 7 \
  --operation-counts 10000 20000 50000 \
  --concurrency-levels 5 10 20 \
  --compaction-thresholds 1000 2000 5000 \
  --timeout 250 \
  --retries 2 \
  --repetitions 3 \
  --test-suite "Distributed Test 2025-08-07"

python test_swarm_distributed.py \
  --images "registry.niklabs.de/niklhut/raftswift:1.3.4" \
  "registry.niklabs.de/niklhut/raftkotlin:1.3.4" \
  "registry.niklabs.de/niklhut/raftgo:1.3.2" \
  --client-image "registry.niklabs.de/niklhut/raftswift:1.3.4" \
  --peer-counts 3 5 7 \
  --operation-counts 10000 20000 50000 \
  --concurrency-levels 5 10 20 \
  --compaction-thresholds 1000 2000 5000 \
  --timeout 250 \
  --retries 2 \
  --repetitions 3 \
  --test-suite "Test Swarm 2025-08-09"


nohup python test_swarm_distributed.py \
  --images "registry.niklabs.de/niklhut/raftswift:1.3.4" \
  "registry.niklabs.de/niklhut/raftkotlin:1.3.4" \
  "registry.niklabs.de/niklhut/raftgo:1.3.2" \
  --client-image "registry.niklabs.de/niklhut/raftswift:1.3.4" \
  --peer-counts 3 5 7 \
  --operation-counts 50000 \
  --concurrency-levels 10 \
  --compaction-thresholds 500 1000 2000 5000 \
  --timeout 250 \
  --retries 2 \
  --repetitions 3 \
  --test-suite "Test Compaction Threshold (50000 operations, 10 concurrency)" &

nohup python3 test_swarm_distributed.py \
  --images "registry.niklabs.de/niklhut/raftswift:1.4.0" \
  "registry.niklabs.de/niklhut/raftkotlin:1.4.0" \
  "registry.niklabs.de/niklhut/raftgo:1.4.0" \
  --client-image "registry.niklabs.de/niklhut/raftswift:1.4.0" \
  --peer-counts 3 5 \
  --operation-counts 50000 \
  --concurrency-levels 10 \
  --compaction-thresholds 1000 \
  --timeout 180 \
  --retries 2 \
  --repetitions 3 \
  --test-suite "Basic Test with Metrics" &

nohup python3 test_swarm_distributed.py \
  --images "registry.niklabs.de/niklhut/raftswift:1.4.0" \
  "registry.niklabs.de/niklhut/raftkotlin:1.4.0" \
  "registry.niklabs.de/niklhut/raftgo:1.4.0" \
  --client-image "registry.niklabs.de/niklhut/raftswift:1.4.0" \
  --peer-counts 3 5 \
  --operation-counts 50000 \
  --concurrency-levels 10 \
  --compaction-thresholds 1000 \
  --timeout 180 \
  --retries 2 \
  --repetitions 3 \
  --cpu-limit 1 \
  --test-suite "Basic Test with Metrics 1 CPU" &

nohup python3 test_swarm_distributed.py \
  --images "registry.niklabs.de/niklhut/raftswift:1.4.1" \
  "registry.niklabs.de/niklhut/raftkotlin:1.4.0" \
  "registry.niklabs.de/niklhut/raftgo:1.4.1" \
  --client-image "registry.niklabs.de/niklhut/raftswift:1.4.1" \
  --scenario-config scenarios.json \
  --timeout 250 \
  --test-suite "Different Instance Sizes" &

docker service create \
  --with-registry-auth \
  --name nh_raft_client \
  --network host \
  --restart-condition none \
  --constraint 'node.hostname==zs07.lab.dm.informatik.tu-darmstadt.de' \
  --mount type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock \
  --mount type=bind,source=/usr/bin/docker,target=/usr/bin/docker \
  --mount type=bind,source=$(pwd)/scenarios.json,target=/scenarios.json \
  --mount type=bind,source=$(pwd)/.docker/config.json,target=/app/.docker/config.json \
  --mount type=bind,source=$(pwd)/swift-test-output,target=/app/test-output \
  registry.niklabs.de/niklhut/raftswift:1.4.5 \
  test-manager --scenario-config /scenarios.json
